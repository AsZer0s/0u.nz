<!doctype html><html><head><meta charset="utf-8"><title>Docker入门系列 (5) - Docker Swarm</title><style>:root{--bg:#111315;--fg:#d6d6d6;--muted:#8b8b8b;--link:#8fa3ad;--link-hover:#c0d2db;--border:#2a2d30;--code-bg:#1a1d1f;--code-border:#2d3135}body{max-width:640px;margin:48px auto;padding:0 16px;background:var(--bg);color:var(--fg);font-family:'Noto Sans SC',system-ui,-apple-system,BlinkMacSystemFont;line-height:1.7}h1{font-size:1.2rem;font-weight:500;margin-bottom:12px}h2{font-size:1.1rem;font-weight:500;margin:2rem 0 1rem;color:var(--fg)}h3{font-size:1rem;font-weight:500;margin:1.5rem 0 0.75rem}.site-header{display:flex;align-items:center;gap:12px;margin-bottom:8px}.site-logo{height:10px;width:auto;display:block}nav{margin-bottom:32px;font-size:0.9rem}nav a{color:var(--muted);text-decoration:none;margin-right:12px}nav a:hover{color:var(--fg)}ul{list-style:none;padding:0;margin:0}li{margin:0.8rem 0}li a{color:var(--link);font-size:0.95rem;text-decoration:none}li a:hover{color:var(--link-hover)}.post-date{color:var(--muted);font-size:0.9rem}p{margin:1em 0}code{background:var(--code-bg);border:1px solid var(--code-border);border-radius:4px;padding:2px 6px;font-family:'Consolas','Monaco','Courier New',monospace;font-size:0.9em;color:#e6e6e6}pre{background:var(--code-bg);border:1px solid var(--code-border);border-radius:6px;padding:16px;overflow-x:auto;margin:1.5em 0}pre::-webkit-scrollbar{height:6px}pre::-webkit-scrollbar-track{background:var(--code-bg)}pre::-webkit-scrollbar-thumb{background:var(--code-border);border-radius:3px}pre::-webkit-scrollbar-thumb:hover{background:var(--muted)}pre code{background:none;border:none;padding:0;font-size:0.875em;line-height:1.6}blockquote{border-left:3px solid var(--border);padding-left:1em;margin:1.5em 0;color:var(--muted);font-style:italic}a{color:var(--link);text-decoration:none}a:hover{color:var(--link-hover)}img{max-width:100%;height:auto;border-radius:4px;margin:1.5em 0}hr{border:none;border-top:1px solid var(--border);margin:2rem 0}table{width:100%;border-collapse:collapse;margin:1.5em 0}th,td{border:1px solid var(--border);padding:8px 12px;text-align:left}th{background:var(--code-bg);font-weight:500}article ul,article ol{list-style:initial;padding-left:2em;margin:1em 0}article li{margin:0.5em 0}footer{margin-top:3rem;padding-top:2rem;border-top:1px solid var(--border);text-align:center}.footer-logo{height:32px;width:auto;display:inline-block;opacity:0.6;transition:opacity 0.3s}.footer-logo:hover{opacity:1}</style><style> .post-meta{display:flex;align-items:center;gap:10px;font-size:13px;color:var(--muted);margin-bottom:24px;flex-wrap:wrap;}.post-tags{display:flex;gap:8px;flex-wrap:wrap;}.tag{font-size:12px;color:var(--muted);text-decoration:none;}.tag::before{content:"#";opacity:.4;}.tag:hover{color:var(--fg);} </style><script> MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']], processEscapes: true, processEnvironments: true }, options: { skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'] } }; </script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet"></head><body><p><a href="/">← index</a></p><h1>Docker入门系列 (5) - Docker Swarm</h1><div class="post-meta"><span>2025-09-25</span><div class="post-tags"><a class="tag" href="/tags/Linux">Linux</a><a class="tag" href="/tags/开发">开发</a><a class="tag" href="/tags/Docker">Docker</a></div></div><article><p>在前几章中，我们已经掌握了 Docker 的基础命令、网络原理以及 Compose 的服务编排能力</p><p>本章将深入讲解 Docker Swarm —— Docker 官方提供的原生容器集群管理工具</p><p>Swarm 能够将多台主机组织成一个统一的集群，实现服务的高可用、自动调度与负载均衡</p><hr /><h2>什么是 Docker Swarm</h2><p>Docker Swarm 是 Docker 内置的集群管理与编排工具</p><p>它允许你将多个 Docker 主机组成一个集群，并在其中部署分布式服务</p><p>Swarm 提供了服务发现、负载均衡、滚动更新等功能，是构建生产级容器平台的重要组件</p><hr /><h2>Swarm 的核心概念</h2><ul><li><strong>节点（Node）</strong>：Swarm 集群中的主机，分为管理节点（Manager）和工作节点（Worker）</li><li><strong>服务（Service）</strong>：Swarm 中运行的容器任务集合，具备副本数、更新策略等配置</li><li><strong>任务（Task）</strong>：服务的具体运行实例，分配给某个节点执行</li><li><strong>覆盖网络（Overlay Network）</strong>：用于跨主机容器通信的虚拟网络</li></ul><hr /><h2>初始化 Swarm 集群</h2><p>在一台主机上执行：</p><pre><code class="language-bash">docker swarm init </code></pre><p>输出中会包含加入集群的命令，例如：</p><pre><code class="language-bash">docker swarm join --token &lt;worker-token&gt; &lt;manager-ip&gt;:2377 </code></pre><p>在其他主机上执行该命令即可加入集群</p><hr /><h2>创建服务</h2><pre><code class="language-bash">docker service create --name web --replicas 3 -p 80:80 nginx </code></pre><p>说明：</p><ul><li><code>--name</code>：服务名称</li><li><code>--replicas</code>：副本数量</li><li><code>-p</code>：端口映射</li><li><code>nginx</code>：使用的镜像</li></ul><p>查看服务状态：</p><pre><code class="language-bash">docker service ls docker service ps web </code></pre><hr /><h2>服务更新与滚动部署</h2><p>更新服务镜像：</p><pre><code class="language-bash">docker service update --image nginx:latest web </code></pre><p>Swarm 会自动进行滚动更新，确保服务不中断</p><hr /><h2>高可用与负载均衡</h2><ul><li>Swarm 会自动将任务分配到不同节点，实现负载均衡</li><li>内置 DNS 服务用于容器间通信</li><li>可配置健康检查与失败自动恢复</li></ul><hr /><h2>Compose 与 Swarm 集成</h2><p>使用 <code>docker-compose.yml</code> 文件部署到 Swarm：</p><pre><code class="language-bash">docker stack deploy -c docker-compose.yml mystack </code></pre><p>查看部署状态：</p><pre><code class="language-bash">docker stack services mystack </code></pre><hr /><h2>Swarm 与 Kubernetes 对比</h2><table><thead><tr><th>特性</th><th>Docker Swarm</th><th>Kubernetes</th></tr></thead><tbody><tr><td>安装复杂度</td><td>简单</td><td>较复杂</td></tr><tr><td>内置支持</td><td>Docker 原生支持</td><td>需额外安装</td></tr><tr><td>社区生态</td><td>较小</td><td>活跃、成熟</td></tr><tr><td>功能扩展性</td><td>基础编排能力</td><td>丰富的插件与控制器</td></tr></tbody></table><hr /><h2>总结</h2><p>Docker Swarm 提供了轻量级的容器编排能力，适合中小型项目或快速部署场景</p><p>它与 Docker Compose 配合使用，可以实现从开发到生产的无缝过渡</p><p>虽然 Kubernetes 更为强大，但 Swarm 依然是理解容器编排原理的理想起点</p></article><hr><p><a href="/">← index</a></p><footer><img src="/0unz.png" alt="0u logo" class="footer-logo"></footer></body></html>