<!doctype html><html><head><meta charset="utf-8"><title>绕过123pan的1G限制</title><style>:root{--bg:#111315;--fg:#d6d6d6;--muted:#8b8b8b;--link:#8fa3ad;--link-hover:#c0d2db;--border:#2a2d30;--code-bg:#1a1d1f;--code-border:#2d3135}body{max-width:640px;margin:48px auto;padding:0 16px;background:var(--bg);color:var(--fg);font-family:'Noto Sans SC',system-ui,-apple-system,BlinkMacSystemFont;line-height:1.7}h1{font-size:1.2rem;font-weight:500;margin-bottom:12px}h2{font-size:1.1rem;font-weight:500;margin:2rem 0 1rem;color:var(--fg)}h3{font-size:1rem;font-weight:500;margin:1.5rem 0 0.75rem}.site-header{display:flex;align-items:center;gap:12px;margin-bottom:8px}.site-logo{height:10px;width:auto;display:block}nav{margin-bottom:32px;font-size:0.9rem}nav a{color:var(--muted);text-decoration:none;margin-right:12px}nav a:hover{color:var(--fg)}ul{list-style:none;padding:0;margin:0}li{margin:0.8rem 0}li a{color:var(--link);font-size:0.95rem;text-decoration:none}li a:hover{color:var(--link-hover)}.post-date{color:var(--muted);font-size:0.9rem}p{margin:1em 0}code{background:var(--code-bg);border:1px solid var(--code-border);border-radius:4px;padding:2px 6px;font-family:'Consolas','Monaco','Courier New',monospace;font-size:0.9em;color:#e6e6e6}pre{background:var(--code-bg);border:1px solid var(--code-border);border-radius:6px;padding:16px;overflow-x:auto;margin:1.5em 0}pre::-webkit-scrollbar{height:6px}pre::-webkit-scrollbar-track{background:var(--code-bg)}pre::-webkit-scrollbar-thumb{background:var(--code-border);border-radius:3px}pre::-webkit-scrollbar-thumb:hover{background:var(--muted)}pre code{background:none;border:none;padding:0;font-size:0.875em;line-height:1.6}blockquote{border-left:3px solid var(--border);padding-left:1em;margin:1.5em 0;color:var(--muted);font-style:italic}a{color:var(--link);text-decoration:none}a:hover{color:var(--link-hover)}img{max-width:100%;height:auto;border-radius:4px;margin:1.5em 0}hr{border:none;border-top:1px solid var(--border);margin:2rem 0}table{width:100%;border-collapse:collapse;margin:1.5em 0}th,td{border:1px solid var(--border);padding:8px 12px;text-align:left}th{background:var(--code-bg);font-weight:500}article ul,article ol{list-style:initial;padding-left:2em;margin:1em 0}article li{margin:0.5em 0}footer{margin-top:3rem;padding-top:2rem;border-top:1px solid var(--border);text-align:center}.footer-logo{height:32px;width:auto;display:inline-block;opacity:0.6;transition:opacity 0.3s}.footer-logo:hover{opacity:1}</style><style> .post-meta{display:flex;align-items:center;gap:10px;font-size:13px;color:var(--muted);margin-bottom:24px;flex-wrap:wrap;}.post-tags{display:flex;gap:8px;flex-wrap:wrap;}.tag{font-size:12px;color:var(--muted);text-decoration:none;}.tag::before{content:"#";opacity:.4;}.tag:hover{color:var(--fg);} </style><script> MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']], processEscapes: true, processEnvironments: true }, options: { skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'] } }; </script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet"></head><body><p><a href="/">← index</a></p><h1>绕过123pan的1G限制</h1><div class="post-meta"><span>2024-11-03</span><div class="post-tags"><a class="tag" href="/tags/软件">软件</a><a class="tag" href="/tags/网络">网络</a></div></div><article><h2>前言</h2><p><strong>Q：这个脚本谁写的？</strong><br><strong>A：不是我写的，脚本里面有注释，但是已经删库了。</strong></p><p><strong>Q：有没有什么优化？</strong><br><strong>A：没有，只删除了冗余的重复代码，改了一些函数调用。</strong></p><p><strong>Q：怎么使用？</strong><br><strong>A：物理机或者虚拟机上面下个123，自己抓包自己改脚本里面的???，不再提供现成UA。改完丢进油猴里面就行。</strong></p><pre><code class="language-bash">// ==UserScript== // @name 123云盘下载辅助 // @namespace https://github.com/Bao-qing/123pan // @version 0.3 // @description 123 Cloud Drive Unlimited Flow // @match https://www.123pan.com/* // @match https://www.123pan.cn/* // @match https://www.123865.com/* // @match https://www.123684.com/* // @grant none // @author Qing // @downloadURL https://update.greasyfork.org/scripts/510621/123%E4%BA%91%E7%9B%98%E4%B8%8B%E8%BD%BD%E8%BE%85%E5%8A%A9.user.js // @updateURL https://update.greasyfork.org/scripts/510621/123%E4%BA%91%E7%9B%98%E4%B8%8B%E8%BD%BD%E8%BE%85%E5%8A%A9.meta.js // ==/UserScript== (function () { const OriginalXHR = window.XMLHttpRequest; const headersToOverride = { &quot;user-agent&quot;: &quot;123pan/v2.4.7(Android_??;???)&quot;, &quot;platform&quot;: &quot;android&quot;, &quot;app-version&quot;: &quot;69&quot;, &quot;x-app-version&quot;: &quot;2.4.7&quot; }; function NewXHR() { const xhr = new OriginalXHR(); xhr.open = function (method, url, async, user, password) { this._url = url; return OriginalXHR.prototype.open.call(this, method, url, async, user, password); }; xhr.setRequestHeader = function (header, value) { const lowerHeader = header.toLowerCase(); if (lowerHeader in headersToOverride) { value = headersToOverride[lowerHeader]; } else { console.log('未覆盖的请求头:', header); } return OriginalXHR.prototype.setRequestHeader.call(this, header, value); }; xhr.send = function (...args) { this.addEventListener('readystatechange', function () { if (xhr.readyState === 4 &amp;&amp; xhr.status === 200) { try { const responseJSON = JSON.parse(xhr.responseText); console.log('原始响应:', responseJSON); if (responseJSON.data &amp;&amp; responseJSON.data.DownloadUrl) { const originUrl = responseJSON.data.DownloadUrl; const newUrlNoRedirect = `${originUrl}&amp;auto_redirect=0`; const base64Data = btoa(newUrlNoRedirect); responseJSON.data.DownloadUrl = `https://web-pro2.123952.com/download-v2/?params=${base64Data}&amp;is_s3=0`; console.log('修改后的 DownloadUrl:', responseJSON.data.DownloadUrl); } const modifiedResponseText = JSON.stringify(responseJSON); Object.defineProperty(xhr, 'responseText', { get: () =&gt; modifiedResponseText }); console.log('修改后的响应:', modifiedResponseText); } catch (error) { console.error('修改响应时出错:', error); } } }); return OriginalXHR.prototype.send.apply(this, args); }; return xhr; } window.XMLHttpRequest = NewXHR; })(); </code></pre></article><hr><p><a href="/">← index</a></p><footer><img src="/0unz.png" alt="0u logo" class="footer-logo"></footer></body></html>